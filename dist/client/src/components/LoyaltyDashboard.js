import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";
import { Crown, Gift, TrendingUp, Star, Award } from "lucide-react";
const TIER_COLORS = {
    Bronze: "text-orange-400",
    Silver: "text-gray-300",
    Gold: "text-yellow-400",
    Platinum: "text-purple-400",
    Diamond: "text-blue-400"
};
const TIER_BENEFITS = {
    Bronze: ["1x Points", "Basic Support"],
    Silver: ["1.2x Points", "Priority Support", "Monthly Free Bet"],
    Gold: ["1.5x Points", "VIP Support", "Weekly Free Bets", "Cashback 5%"],
    Platinum: ["2x Points", "Dedicated Manager", "Daily Free Bets", "Cashback 10%"],
    Diamond: ["3x Points", "Personal Concierge", "Premium Bonuses", "Cashback 15%"]
};
export default function LoyaltyDashboard() {
    const [activeTab, setActiveTab] = useState('overview');
    const { data: loyaltyData } = useQuery({
        queryKey: ["/api/loyalty"],
    });
    if (!loyaltyData) {
        return (_jsx("div", { className: "card-modern p-8 text-center", children: _jsxs("div", { className: "animate-pulse", children: [_jsx("div", { className: "h-6 bg-white/10 rounded mb-4" }), _jsx("div", { className: "h-4 bg-white/10 rounded mb-2" }), _jsx("div", { className: "h-4 bg-white/10 rounded" })] }) }));
    }
    const progressPercentage = loyaltyData.nextTier
        ? ((loyaltyData.currentPoints / (loyaltyData.currentPoints + loyaltyData.pointsToNextTier)) * 100)
        : 100;
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "card-modern p-6 gradient-accent", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx(Crown, { className: "text-yellow-400", size: 32 }), _jsxs("div", { children: [_jsx("h2", { className: "text-2xl font-bold text-white", children: "VIP Loyalty Program" }), _jsx("p", { className: "text-white/80", children: "Unlock exclusive rewards and benefits" })] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: `text-2xl font-bold ${TIER_COLORS[loyaltyData.tier]}`, children: [loyaltyData.tier, " Member"] }), _jsx("div", { className: "text-white/80 text-sm", children: "Since 2024" })] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [_jsxs("div", { className: "glass rounded-xl p-4 text-center", children: [_jsx("div", { className: "text-2xl font-bold text-winnex-green mb-1", children: loyaltyData.currentPoints.toLocaleString() }), _jsx("div", { className: "text-white/70 text-sm", children: "Current Points" })] }), _jsxs("div", { className: "glass rounded-xl p-4 text-center", children: [_jsx("div", { className: "text-2xl font-bold text-winnex-blue mb-1", children: loyaltyData.totalEarned.toLocaleString() }), _jsx("div", { className: "text-white/70 text-sm", children: "Total Earned" })] }), _jsxs("div", { className: "glass rounded-xl p-4 text-center", children: [_jsx("div", { className: "text-2xl font-bold text-winnex-orange mb-1", children: loyaltyData.pointsToNextTier || 0 }), _jsx("div", { className: "text-white/70 text-sm", children: "To Next Tier" })] })] })] }), loyaltyData.nextTier && (_jsxs("div", { className: "card-modern p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsxs("h3", { className: "font-bold text-lg", children: ["Progress to ", loyaltyData.nextTier] }), _jsxs("span", { className: "text-sm text-white/60", children: [progressPercentage.toFixed(1), "%"] })] }), _jsxs("div", { className: "relative", children: [_jsx("div", { className: "w-full bg-white/10 rounded-full h-3", children: _jsx("div", { className: "bg-gradient-to-r from-winnex-green to-winnex-blue h-3 rounded-full transition-all duration-500", style: { width: `${progressPercentage}%` } }) }), _jsxs("div", { className: "absolute -top-8 right-0 text-sm font-medium text-winnex-green", children: [loyaltyData.pointsToNextTier, " points to go"] })] })] })), _jsxs("div", { className: "glass rounded-xl p-1 flex", children: [_jsx("button", { onClick: () => setActiveTab('overview'), className: `flex-1 py-3 px-4 rounded-lg font-medium transition-all ${activeTab === 'overview' ? 'bg-winnex-green text-black' : 'text-white/70 hover:text-white'}`, children: "Overview" }), _jsx("button", { onClick: () => setActiveTab('rewards'), className: `flex-1 py-3 px-4 rounded-lg font-medium transition-all ${activeTab === 'rewards' ? 'bg-winnex-green text-black' : 'text-white/70 hover:text-white'}`, children: "Rewards" }), _jsx("button", { onClick: () => setActiveTab('history'), className: `flex-1 py-3 px-4 rounded-lg font-medium transition-all ${activeTab === 'history' ? 'bg-winnex-green text-black' : 'text-white/70 hover:text-white'}`, children: "History" })] }), activeTab === 'overview' && (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "card-modern p-6", children: [_jsxs("h3", { className: "font-bold text-lg mb-4", children: ["Your ", loyaltyData.tier, " Benefits"] }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: TIER_BENEFITS[loyaltyData.tier]?.map((benefit, index) => (_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx(Star, { className: "text-winnex-green", size: 16 }), _jsx("span", { children: benefit })] }, index))) })] }), _jsxs("div", { className: "card-modern p-6", children: [_jsx("h3", { className: "font-bold text-lg mb-4", children: "How to Earn Points" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { children: "Place a bet" }), _jsx("span", { className: "text-winnex-green font-medium", children: "1 point per $1" })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { children: "Refer a friend" }), _jsx("span", { className: "text-winnex-green font-medium", children: "500 points" })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { children: "Complete daily challenges" }), _jsx("span", { className: "text-winnex-green font-medium", children: "50-200 points" })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { children: "Monthly loyalty bonus" }), _jsx("span", { className: "text-winnex-green font-medium", children: "100-1000 points" })] })] })] })] })), activeTab === 'rewards' && (_jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: [
                    { name: "Free Bet $10", cost: 1000, icon: Gift },
                    { name: "Cashback 5%", cost: 2000, icon: TrendingUp },
                    { name: "Odds Boost", cost: 500, icon: Award },
                    { name: "VIP Support", cost: 3000, icon: Crown },
                    { name: "Free Bet $25", cost: 2500, icon: Gift },
                    { name: "Exclusive Bonus", cost: 5000, icon: Star },
                ].map((reward, index) => (_jsxs("div", { className: "card-modern p-6 text-center", children: [_jsx(reward.icon, { className: "mx-auto mb-3 text-winnex-green", size: 32 }), _jsx("h3", { className: "font-bold mb-2", children: reward.name }), _jsxs("div", { className: "text-2xl font-bold text-winnex-orange mb-4", children: [reward.cost.toLocaleString(), " pts"] }), _jsx("button", { className: `w-full py-2 rounded-lg font-medium transition-all ${loyaltyData.currentPoints >= reward.cost
                                ? 'btn-primary'
                                : 'bg-white/10 text-white/50 cursor-not-allowed'}`, disabled: loyaltyData.currentPoints < reward.cost, children: loyaltyData.currentPoints >= reward.cost ? 'Redeem' : 'Insufficient Points' })] }, index))) })), activeTab === 'history' && (_jsxs("div", { className: "card-modern p-6", children: [_jsx("h3", { className: "font-bold text-lg mb-4", children: "Recent Activity" }), _jsx("div", { className: "space-y-3", children: loyaltyData.recentActivity?.map((activity) => (_jsxs("div", { className: "flex items-center justify-between py-3 border-b border-white/10 last:border-b-0", children: [_jsxs("div", { children: [_jsx("div", { className: "font-medium", children: activity.description }), _jsx("div", { className: "text-sm text-white/60", children: activity.source })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-winnex-green font-bold", children: ["+", activity.points, " pts"] }), _jsx("div", { className: "text-xs text-white/60", children: new Date(activity.createdAt).toLocaleDateString() })] })] }, activity.id))) || (_jsxs("div", { className: "text-center py-8 text-white/60", children: [_jsx(Award, { className: "mx-auto mb-3", size: 24 }), _jsx("p", { children: "No recent activity" })] })) })] }))] }));
}
