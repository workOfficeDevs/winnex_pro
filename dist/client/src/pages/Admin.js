import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useQuery } from "@tanstack/react-query";
import { useAuth } from "@/hooks/useAuth";
import { useEffect } from "react";
import { useToast } from "@/hooks/use-toast";
import Layout from "@/components/Layout";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { ChartLine, Users, TicketCheck, Shield, Pause, Edit3, Ban, UserCheck, CreditCard, Headphones, Radio, Megaphone, Download, TrendingUp, AlertTriangle, } from "lucide-react";
export default function Admin() {
    const { user } = useAuth();
    const { toast } = useToast();
    // Redirect if not admin
    useEffect(() => {
        if (user && !user.isAdmin) {
            toast({
                title: "Access Denied",
                description: "You don't have permission to access the admin panel.",
                variant: "destructive",
            });
            window.location.href = "/";
        }
    }, [user, toast]);
    const { data: adminStats } = useQuery({
        queryKey: ["/api/admin/stats"],
        enabled: user?.isAdmin,
    });
    if (!user?.isAdmin) {
        return (_jsx(Layout, { children: _jsx("div", { className: "min-h-screen flex items-center justify-center", children: _jsxs("div", { className: "text-center", children: [_jsx(AlertTriangle, { className: "mx-auto mb-4 text-red-500", size: 64 }), _jsx("h1", { className: "text-2xl font-bold mb-2", children: "Access Denied" }), _jsx("p", { className: "text-gray-400", children: "You don't have permission to access this page." })] }) }) }));
    }
    return (_jsx(Layout, { children: _jsxs("div", { className: "p-6", children: [_jsxs("div", { className: "mb-6", children: [_jsx("h1", { className: "text-3xl font-bold mb-2", children: "Platform Management Dashboard" }), _jsx("p", { className: "text-gray-400", children: "Admin-only interface for platform operations" })] }), _jsxs("div", { className: "grid lg:grid-cols-4 gap-6 mb-8", children: [_jsx(Card, { className: "bg-winnex-gray border-gray-600", children: _jsxs(CardContent, { className: "p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("h3", { className: "font-semibold", children: "Today's Revenue" }), _jsx(ChartLine, { className: "text-winnex-green", size: 20 })] }), _jsxs("div", { className: "text-2xl font-bold text-winnex-green", children: ["$", adminStats?.revenue?.today || "47,329"] }), _jsx("div", { className: "text-xs text-green-400", children: "+12.5% vs yesterday" })] }) }), _jsx(Card, { className: "bg-winnex-gray border-gray-600", children: _jsxs(CardContent, { className: "p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("h3", { className: "font-semibold", children: "Active Users" }), _jsx(Users, { className: "text-winnex-blue", size: 20 })] }), _jsx("div", { className: "text-2xl font-bold text-winnex-blue", children: adminStats?.users?.active || "2,847" }), _jsx("div", { className: "text-xs text-blue-400", children: "+5.2% vs last hour" })] }) }), _jsx(Card, { className: "bg-winnex-gray border-gray-600", children: _jsxs(CardContent, { className: "p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("h3", { className: "font-semibold", children: "Total Bets" }), _jsx(TicketCheck, { className: "text-winnex-orange", size: 20 })] }), _jsx("div", { className: "text-2xl font-bold text-winnex-orange", children: adminStats?.bets?.total || "18,492" }), _jsx("div", { className: "text-xs text-orange-400", children: "+8.7% vs yesterday" })] }) }), _jsx(Card, { className: "bg-winnex-gray border-gray-600", children: _jsxs(CardContent, { className: "p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-2", children: [_jsx("h3", { className: "font-semibold", children: "Risk Exposure" }), _jsx(Shield, { className: "text-yellow-500", size: 20 })] }), _jsxs("div", { className: "text-2xl font-bold text-yellow-500", children: ["$", adminStats?.risk?.exposure || "234K"] }), _jsx("div", { className: "text-xs text-yellow-400", children: "Within limits" })] }) })] }), _jsxs("div", { className: "grid md:grid-cols-3 gap-6 mb-8", children: [_jsxs(Card, { className: "bg-winnex-gray border-gray-600", children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center", children: [_jsx(Shield, { className: "mr-2", size: 20 }), "Risk Management"] }) }), _jsxs(CardContent, { className: "space-y-2", children: [_jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Pause, { className: "mr-2", size: 16 }), "Suspend Market"] }), _jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Edit3, { className: "mr-2", size: 16 }), "Adjust Odds"] }), _jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Ban, { className: "mr-2", size: 16 }), "Limit User"] })] })] }), _jsxs(Card, { className: "bg-winnex-gray border-gray-600", children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center", children: [_jsx(Users, { className: "mr-2", size: 20 }), "User Management"] }) }), _jsxs(CardContent, { className: "space-y-2", children: [_jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(UserCheck, { className: "mr-2", size: 16 }), "KYC Reviews", _jsx(Badge, { className: "ml-auto bg-red-500", children: "5" })] }), _jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(CreditCard, { className: "mr-2", size: 16 }), "Payment Issues", _jsx(Badge, { className: "ml-auto bg-yellow-500", children: "12" })] }), _jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Headphones, { className: "mr-2", size: 16 }), "Support Tickets", _jsx(Badge, { className: "ml-auto bg-blue-500", children: "23" })] })] })] }), _jsxs(Card, { className: "bg-winnex-gray border-gray-600", children: [_jsx(CardHeader, { children: _jsxs(CardTitle, { className: "flex items-center", children: [_jsx(Radio, { className: "mr-2", size: 20 }), "Platform Control"] }) }), _jsxs(CardContent, { className: "space-y-2", children: [_jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Radio, { className: "mr-2", size: 16 }), "System Status", _jsx(Badge, { className: "ml-auto bg-green-500", children: "Online" })] }), _jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Megaphone, { className: "mr-2", size: 16 }), "Send Alert"] }), _jsxs(Button, { variant: "outline", size: "sm", className: "w-full justify-start border-gray-600", children: [_jsx(Download, { className: "mr-2", size: 16 }), "Export Data"] })] })] })] }), _jsxs("div", { className: "grid lg:grid-cols-2 gap-6", children: [_jsxs(Card, { className: "bg-winnex-gray border-gray-600", children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Recent High-Value Bets" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center justify-between p-3 bg-winnex-dark rounded", children: [_jsxs("div", { children: [_jsx("div", { className: "font-semibold", children: "User #2847" }), _jsx("div", { className: "text-sm text-gray-400", children: "Arsenal vs Chelsea" })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "font-bold text-winnex-green", children: "$5,000" }), _jsx("div", { className: "text-xs text-gray-400", children: "2 min ago" })] })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-winnex-dark rounded", children: [_jsxs("div", { children: [_jsx("div", { className: "font-semibold", children: "User #1923" }), _jsx("div", { className: "text-sm text-gray-400", children: "Lakers vs Warriors" })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "font-bold text-winnex-green", children: "$3,200" }), _jsx("div", { className: "text-xs text-gray-400", children: "5 min ago" })] })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-winnex-dark rounded", children: [_jsxs("div", { children: [_jsx("div", { className: "font-semibold", children: "User #5621" }), _jsx("div", { className: "text-sm text-gray-400", children: "Live Blackjack" })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "font-bold text-winnex-green", children: "$2,800" }), _jsx("div", { className: "text-xs text-gray-400", children: "8 min ago" })] })] })] }) })] }), _jsxs(Card, { className: "bg-winnex-gray border-gray-600", children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "System Alerts" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center space-x-3 p-3 bg-red-900/20 border border-red-500/20 rounded", children: [_jsx(AlertTriangle, { className: "text-red-500", size: 16 }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "font-semibold", children: "High Risk Exposure" }), _jsx("div", { className: "text-sm text-gray-400", children: "Football: Man City vs Liverpool" })] }), _jsx(Button, { size: "sm", variant: "outline", className: "border-red-500 text-red-500", children: "Review" })] }), _jsxs("div", { className: "flex items-center space-x-3 p-3 bg-yellow-900/20 border border-yellow-500/20 rounded", children: [_jsx(AlertTriangle, { className: "text-yellow-500", size: 16 }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "font-semibold", children: "Unusual Betting Pattern" }), _jsx("div", { className: "text-sm text-gray-400", children: "Tennis: Djokovic vs Nadal" })] }), _jsx(Button, { size: "sm", variant: "outline", className: "border-yellow-500 text-yellow-500", children: "Investigate" })] }), _jsxs("div", { className: "flex items-center space-x-3 p-3 bg-blue-900/20 border border-blue-500/20 rounded", children: [_jsx(TrendingUp, { className: "text-blue-500", size: 16 }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "font-semibold", children: "Peak Traffic Alert" }), _jsx("div", { className: "text-sm text-gray-400", children: "Server load at 85%" })] }), _jsx(Button, { size: "sm", variant: "outline", className: "border-blue-500 text-blue-500", children: "Monitor" })] })] }) })] })] })] }) }));
}
